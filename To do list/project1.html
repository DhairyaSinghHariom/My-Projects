<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProductiveFlow - To-Do List</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #3B82F6;
            --primary-dark: #2563EB;
            --secondary: #8B5CF6;
            --success: #10B981;
            --danger: #EF4444;
            --warning: #F59E0B;
        }
        
        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        .task-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            animation: slideIn 0.3s ease-out;
        }
        
        .task-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        
        .completed {
            opacity: 0.7;
            text-decoration: line-through;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .checkmark {
            display: inline-block;
            transform: rotate(45deg);
            height: 12px;
            width: 6px;
            border-bottom: 2px solid #fff;
            border-right: 2px solid #fff;
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .drag-over {
            background: rgba(59, 130, 246, 0.1);
            border: 2px dashed #3B82F6;
        }
    </style>
</head>
<body class="min-h-screen py-8 px-4">
    <div class="max-w-4xl mx-auto">
        <!-- Header Section -->
        <div class="text-center mb-8 fade-in">
            <div class="flex items-center justify-center mb-4">
                <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/313d4ef8-28dd-400e-b528-5314f9f34a43.png" alt="ProductiveFlow logo featuring a modern checklist icon with gradient blue and purple colors" class="w-20 h-20 rounded-lg shadow-lg mr-4" />
                <h1 class="text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-purple-600">
                    ProductiveFlow
                </h1>
            </div>
            <p class="text-white text-lg opacity-90">Stay organized and boost your productivity</p>
        </div>

        <!-- Stats Dashboard -->
        <div class="glass-effect rounded-xl p-6 mb-6 shadow-xl fade-in">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="text-center p-4 bg-blue-50 rounded-lg">
                    <div class="text-2xl font-bold text-blue-600" id="total-tasks">0</div>
                    <div class="text-sm text-blue-700">Total Tasks</div>
                </div>
                <div class="text-center p-4 bg-green-50 rounded-lg">
                    <div class="text-2xl font-bold text-green-600" id="completed-tasks">0</div>
                    <div class="text-sm text-green-700">Completed</div>
                </div>
                <div class="text-center p-4 bg-orange-50 rounded-lg">
                    <div class="text-2xl font-bold text-orange-600" id="pending-tasks">0</div>
                    <div class="text-sm text-orange-700">Pending</div>
                </div>
            </div>
        </div>

        <!-- Add Task Form -->
        <div class="glass-effect rounded-xl p-6 mb-6 shadow-xl fade-in">
            <form id="add-task-form" class="space-y-4">
                <div>
                    <label for="task-input" class="block text-sm font-medium text-gray-700 mb-2">Add New Task</label>
                    <input 
                        type="text" 
                        id="task-input" 
                        placeholder="What needs to be done?" 
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                        required
                    >
                </div>
                <div>
                    <label for="task-category" class="block text-sm font-medium text-gray-700 mb-2">Category</label>
                    <select 
                        id="task-category" 
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    >
                        <option value="personal">Personal</option>
                        <option value="work">Work</option>
                        <option value="shopping">Shopping</option>
                        <option value="health">Health</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label for="task-date" class="block text-sm font-medium text-gray-700 mb-2">Due Date</label>
                        <input 
                            type="date" 
                            id="task-date" 
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        >
                    </div>
                    <div>
                        <label for="task-priority" class="block text-sm font-medium text-gray-700 mb-2">Priority</label>
                        <select 
                            id="task-priority" 
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        >
                            <option value="low">Low</option>
                            <option value="medium" selected>Medium</option>
                            <option value="high">High</option>
                        </select>
                    </div>
                </div>
                <button 
                    type="submit" 
                    class="w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-6 rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200 transform hover:scale-105 shadow-lg"
                >
                    <i class="fas fa-plus-circle mr-2"></i>Add Task
                </button>
            </form>
        </div>

        <!-- Filter & Search -->
        <div class="glass-effect rounded-xl p-4 mb-6 shadow-xl fade-in">
            <div class="flex flex-col md:flex-row gap-4 items-center">
                <div class="flex-1">
                    <input 
                        type="text" 
                        id="search-input" 
                        placeholder="Search tasks..." 
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    >
                </div>
                <div class="flex gap-2 flex-wrap">
                    <button id="filter-all" class="px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium transition-all duration-200 hover:bg-blue-700">All</button>
                    <button id="filter-active" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg text-sm font-medium transition-all duration-200 hover:bg-gray-300">Active</button>
                    <button id="filter-completed" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg text-sm font-medium transition-all duration-200 hover:bg-gray-300">Completed</button>
                </div>
                <button id="clear-completed" class="px-4 py-2 bg-red-100 text-red-700 rounded-lg text-sm font-medium transition-all duration-200 hover:bg-red-200">
                    <i class="fas fa-trash-alt mr-1"></i>Clear Completed
                </button>
            </div>
        </div>

        <!-- Task List -->
        <div class="glass-effect rounded-xl p-6 shadow-xl fade-in">
            <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center">
                <i class="fas fa-list-check mr-3 text-blue-600"></i>Your Tasks
            </h2>
            
            <div id="tasks-container" class="space-y-3 min-h-200">
                <div class="text-center py-12 text-gray-500" id="empty-state">
                    <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/636573ba-231e-452e-b2e8-d67658f58747.png" alt="Empty task list illustration showing a clipboard with a checkmark and floating bubbles" class="w-24 h-24 mx-auto mb-4 opacity-50" />
                    <p class="text-lg">No tasks yet. Add your first task to get started!</p>
                </div>
            </div>

            <!-- Progress Bar -->
            <div class="mt-6 pt-4 border-t border-gray-200">
                <div class="flex justify-between items-center mb-2">
                    <span class="text-sm text-gray-600">Progress</span>
                    <span class="text-sm font-medium text-blue-600" id="progress-percentage">0%</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2">
                    <div id="progress-bar" class="bg-gradient-to-r from-blue-600 to-purple-600 h-2 rounded-full transition-all duration-500" style="width: 0%"></div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="text-center mt-8 text-white opacity-80">
            <p>Made with <i class="fas fa-heart text-red-400"></i> using HTML, CSS & JavaScript</p>
        </div>
    </div>

    <script>
        class TodoApp {
            constructor() {
                this.tasks = JSON.parse(localStorage.getItem('tasks')) || [];
                this.currentFilter = 'all';
                this.searchQuery = '';
                this.init();
            }

            init() {
                this.bindEvents();
                this.renderTasks();
                this.updateStats();
            }

            bindEvents() {
                // Form submission
                document.getElementById('add-task-form').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.addTask();
                });

                // Filter buttons
                document.getElementById('filter-all').addEventListener('click', () => this.setFilter('all'));
                document.getElementById('filter-active').addEventListener('click', () => this.setFilter('active'));
                document.getElementById('filter-completed').addEventListener('click', () => this.setFilter('completed'));
                document.getElementById('clear-completed').addEventListener('click', () => this.clearCompleted());

                // Search input
                document.getElementById('search-input').addEventListener('input', (e) => {
                    this.searchQuery = e.target.value.toLowerCase();
                    this.renderTasks();
                });

                // Drag and drop (for future enhancement)
                this.initDragAndDrop();
            }

            initDragAndDrop() {
                const container = document.getElementById('tasks-container');
                container.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    const afterElement = this.getDragAfterElement(container, e.clientY);
                    const draggable = document.querySelector('.dragging');
                    if (draggable) {
                        if (afterElement == null) {
                            container.appendChild(draggable);
                        } else {
                            container.insertBefore(draggable, afterElement);
                        }
                    }
                });
            }

            addTask() {
                const input = document.getElementById('task-input');
                const category = document.getElementById('task-category');
                const date = document.getElementById('task-date');
                const priority = document.getElementById('task-priority');

                if (input.value.trim() === '') return;

                const task = {
                    id: Date.now(),
                    text: input.value.trim(),
                    completed: false,
                    category: category.value,
                    dueDate: date.value,
                    priority: priority.value,
                    createdAt: new Date().toISOString()
                };

                this.tasks.unshift(task);
                this.saveTasks();
                this.renderTasks();
                this.updateStats();

                // Reset form
                input.value = '';
                date.value = '';
                category.value = 'personal';
                priority.value = 'medium';
                input.focus();
            }

            toggleTask(id) {
                this.tasks = this.tasks.map(task => 
                    task.id === id ? { ...task, completed: !task.completed } : task
                );
                this.saveTasks();
                this.renderTasks();
                this.updateStats();
            }

            deleteTask(id) {
                if (confirm('Are you sure you want to delete this task?')) {
                    this.tasks = this.tasks.filter(task => task.id !== id);
                    this.saveTasks();
                    this.renderTasks();
                    this.updateStats();
                }
            }

            clearCompleted() {
                this.tasks = this.tasks.filter(task => !task.completed);
                this.saveTasks();
                this.renderTasks();
                this.updateStats();
            }

            setFilter(filter) {
                this.currentFilter = filter;
                
                // Update button states
                document.querySelectorAll('#filter-all, #filter-active, #filter-completed').forEach(btn => {
                    btn.classList.remove('bg-blue-600', 'text-white');
                    btn.classList.add('bg-gray-200', 'text-gray-700');
                });
                
                document.getElementById(`filter-${filter}`).classList.remove('bg-gray-200', 'text-gray-700');
                document.getElementById(`filter-${filter}`).classList.add('bg-blue-600', 'text-white');
                
                this.renderTasks();
            }

            getFilteredTasks() {
                let filtered = this.tasks;

                // Apply search filter
                if (this.searchQuery) {
                    filtered = filtered.filter(task => 
                        task.text.toLowerCase().includes(this.searchQuery) ||
                        task.category.toLowerCase().includes(this.searchQuery)
                    );
                }

                // Apply status filter
                switch (this.currentFilter) {
                    case 'active':
                        return filtered.filter(task => !task.completed);
                    case 'completed':
                        return filtered.filter(task => task.completed);
                    default:
                        return filtered;
                }
            }

            renderTasks() {
                const container = document.getElementById('tasks-container');
                const filteredTasks = this.getFilteredTasks();
                
                if (filteredTasks.length === 0) {
                    container.innerHTML = `
                        <div class="text-center py-12 text-gray-500">
                            <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/a42b5349-37db-4945-a0a2-1b70b726df78.png" alt="No tasks found illustration showing a magnifying glass over an empty document" class="w-24 h-24 mx-auto mb-4 opacity-50" />
                            <p class="text-lg">${this.searchQuery ? 'No tasks matching your search' : 'No tasks to display'}</p>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = filteredTasks.map(task => this.createTaskElement(task)).join('');
            }

            createTaskElement(task) {
                const priorityColors = {
                    low: 'bg-blue-100 text-blue-800',
                    medium: 'bg-yellow-100 text-yellow-800',
                    high: 'bg-red-100 text-red-800'
                };

                const categoryIcons = {
                    personal: 'fas fa-user',
                    work: 'fas fa-briefcase',
                    shopping: 'fas fa-shopping-cart',
                    health: 'fas fa-heart',
                    other: 'fas fa-star'
                };

                const dueDate = task.dueDate ? new Date(task.dueDate).toLocaleDateString() : 'No due date';
                const isOverdue = task.dueDate && !task.completed && new Date(task.dueDate) < new Date();

                return `
                    <div class="task-card glass-effect rounded-lg p-4 flex items-center gap-4 cursor-grab ${task.completed ? 'completed' : ''}" draggable="true" data-id="${task.id}">
                        <div class="flex-shrink-0">
                            <div class="w-6 h-6 rounded-full border-2 ${task.completed ? 'bg-green-500 border-green-500' : 'border-gray-300'} flex items-center justify-center cursor-pointer transition-all duration-200 hover:scale-110"
                                 onclick="todoApp.toggleTask(${task.id})">
                                ${task.completed ? '<div class="checkmark"></div>' : ''}
                            </div>
                        </div>
                        
                        <div class="flex-1 min-w-0">
                            <div class="flex items-center gap-2 mb-1">
                                <span class="text-sm px-2 py-1 rounded-full ${priorityColors[task.priority]}">
                                    <i class="${categoryIcons[task.category]} mr-1"></i>${task.category}
                                </span>
                                <span class="text-xs ${isOverdue ? 'text-red-600 font-semibold' : 'text-gray-500'}">
                                    <i class="fas fa-calendar-alt mr-1"></i>${dueDate}
                                    ${isOverdue ? ' (Overdue)' : ''}
                                </span>
                            </div>
                            <p class="text-gray-800 font-medium truncate">${this.escapeHtml(task.text)}</p>
                        </div>
                        
                        <div class="flex items-center gap-2">
                            <button onclick="todoApp.toggleTask(${task.id})" class="p-2 text-gray-400 hover:text-green-600 transition-colors duration-200" title="${task.completed ? 'Mark as active' : 'Mark as complete'}">
                                <i class="${task.completed ? 'fas fa-rotate-left' : 'fas fa-check'}"></i>
                            </button>
                            <button onclick="todoApp.deleteTask(${task.id})" class="p-2 text-gray-400 hover:text-red-600 transition-colors duration-200" title="Delete task">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </div>
                    </div>
                `;
            }

            updateStats() {
                const total = this.tasks.length;
                const completed = this.tasks.filter(task => task.completed).length;
                const pending = total - completed;
                const percentage = total > 0 ? Math.round((completed / total) * 100) : 0;

                document.getElementById('total-tasks').textContent = total;
                document.getElementById('completed-tasks').textContent = completed;
                document.getElementById('pending-tasks').textContent = pending;
                document.getElementById('progress-percentage').textContent = `${percentage}%`;
                document.getElementById('progress-bar').style.width = `${percentage}%`;
            }

            saveTasks() {
                localStorage.setItem('tasks', JSON.stringify(this.tasks));
            }

            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }

            getDragAfterElement(container, y) {
                const draggableElements = [...container.querySelectorAll('.task-card:not(.dragging)')];
                
                return draggableElements.reduce((closest, child) => {
                    const box = child.getBoundingClientRect();
                    const offset = y - box.top - box.height / 2;
                    
                    if (offset < 0 && offset > closest.offset) {
                        return { offset: offset, element: child };
                    } else {
                        return closest;
                    }
                }, { offset: Number.NEGATIVE_INFINITY }).element;
            }
        }

        // Initialize the app
        const todoApp = new TodoApp();

        // Add some sample tasks on first load
        if (todoApp.tasks.length === 0) {
            todoApp.tasks = [
                {
                    id: 1,
                    text: "Welcome to your new todo list! Click to complete me",
                    completed: false,
                    category: "personal",
                    dueDate: "",
                    priority: "medium",
                    createdAt: new Date().toISOString()
                },
                {
                    id: 2,
                    text: "Try adding your own tasks using the form above",
                    completed: false,
                    category: "work",
                    dueDate: "",
                    priority: "high",
                    createdAt: new Date().toISOString()
                },
                {
                    id: 3,
                    text: "Drag and drop tasks to reorder them (coming soon)",
                    completed: true,
                    category: "other",
                    dueDate: "",
                    priority: "low",
                    createdAt: new Date().toISOString()
                }
            ];
            todoApp.saveTasks();
            todoApp.renderTasks();
            todoApp.updateStats();
        }
    </script>
</body>
</html>
